#!/usr/bin/env ruby

# taken from Programming Ruby 1.9 - The Pragmatic Programmersâ€™ Guide
def require_relative(relative_feature)
	c = caller.first
	fail "Can't parse #{c}" unless c.rindex(/:\d+(:in `.*')?$/)
	file = $`

	if /\A\((.*)\)/ =~ file # eval, etc.
		raise LoadError, "require_relative is called in #{$1}"
	end

	absolute = File.expand_path(relative_feature, File.dirname(file))
	require absolute
end


require_relative '../lib/mars_rover'

raise "Usage: mars-rover input.txt" unless ARGV.size == 1

input = File.read(ARGV.first).strip

deployment = MarsRover.new_deployment(input)
deployment.deploy

puts deployment.output

exit 0
